import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as s,f as n}from"./app-dd45151f.js";const i={},d=n(`<h1 id="設定使用-ssh-key-登入-linux-主機" tabindex="-1"><a class="header-anchor" href="#設定使用-ssh-key-登入-linux-主機" aria-hidden="true">#</a> 設定使用 SSH Key 登入 Linux 主機</h1><p>透過設定 ssh key 可使登入 linux 主機不需要打密碼，<br> 本範例以 windows 主機連線 linux 的情境為例子。</p><h1 id="加入金鑰" tabindex="-1"><a class="header-anchor" href="#加入金鑰" aria-hidden="true">#</a> 加入金鑰</h1><h2 id="金鑰建立與設定" tabindex="-1"><a class="header-anchor" href="#金鑰建立與設定" aria-hidden="true">#</a> 金鑰建立與設定</h2><p>參考文件 [[setting_ssh_key]]</p><h2 id="建立金鑰列表檔案" tabindex="-1"><a class="header-anchor" href="#建立金鑰列表檔案" aria-hidden="true">#</a> 建立金鑰列表檔案</h2><p>在想要連線的 Linux 主機內建立 authorized_keys 檔案</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> .ssh
<span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">nano</span> authorized_keys
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="填寫金鑰列表檔案" tabindex="-1"><a class="header-anchor" href="#填寫金鑰列表檔案" aria-hidden="true">#</a> 填寫金鑰列表檔案</h2><p>將 windows 產生的 公鑰複製貼上到 authorized_keys 檔案內</p><h2 id="設定金鑰列表檔案權限" tabindex="-1"><a class="header-anchor" href="#設定金鑰列表檔案權限" aria-hidden="true">#</a> 設定金鑰列表檔案權限</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">chmod</span> <span class="token number">700</span> ~/.ssh/
<span class="token function">chmod</span> <span class="token number">600</span> ~/.ssh/*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="進行連線" tabindex="-1"><a class="header-anchor" href="#進行連線" aria-hidden="true">#</a> 進行連線</h1><h2 id="使用命令提示字元" tabindex="-1"><a class="header-anchor" href="#使用命令提示字元" aria-hidden="true">#</a> 使用命令提示字元</h2><p>使用 ssh 進行連線指令<br> 如有多個私鑰 -i 參數指定要使用的私鑰檔：<br> 如果不是使用 SSH 預設的 22 port，可使用 -p 參數指定 port：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ssh</span> pamis@xxx.xxx.xxx.xxx <span class="token parameter variable">-i</span> C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>pamis<span class="token punctuation">\\</span>.ssh<span class="token punctuation">\\</span>id_rsa_ubuntu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="使用-visual-studio-code" tabindex="-1"><a class="header-anchor" href="#使用-visual-studio-code" aria-hidden="true">#</a> 使用 Visual Studio Code</h2><h3 id="設定連線設定檔案" tabindex="-1"><a class="header-anchor" href="#設定連線設定檔案" aria-hidden="true">#</a> 設定連線設定檔案</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Host LabServer                              <span class="token comment">#填寫別名</span>
	HostName xxx.xxx.xxx.xxx                <span class="token comment">#主機名稱或是ip位置</span>
	Port                                    <span class="token comment">#如果有指定的Port號</span>
	User username                           <span class="token comment">#登入的使用者名稱</span>
    PreferredAuthentications publickey      <span class="token comment">#首選驗證方式</span>
    IdentityFile ~/.ssh/id_rsa_ubuntu       <span class="token comment">#私鑰路徑</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>實際可參考</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 本機-線上申請前台
Host 192.168.100.100-VMware-Aplus-pamis-ssh
    HostName 192.168.100.100
    User pamis
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_rsa_ubuntu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用-putty" tabindex="-1"><a class="header-anchor" href="#使用-putty" aria-hidden="true">#</a> 使用 Putty</h2><p>由於 Putty 只接受 ppk 格式的私鑰<br> 所以需要先匯入現有的私鑰並轉換 ppk 格式</p><h3 id="匯入到-puttygen" tabindex="-1"><a class="header-anchor" href="#匯入到-puttygen" aria-hidden="true">#</a> 匯入到 PuTTYgen</h3><ul><li>點選 Load</li><li>選擇所有檔案並匯入私鑰檔案</li><li>點選 Save private key 另存 .ppk 格式</li></ul><h3 id="設定-putty-連線" tabindex="-1"><a class="header-anchor" href="#設定-putty-連線" aria-hidden="true">#</a> 設定 Putty 連線</h3><ul><li>用戶名稱：Connection &gt; Data &gt; Auto-login username</li><li>私鑰檔案：Connection &gt; SSH &gt; Auth</li><li>記得存檔</li></ul><h1 id="root-登入" tabindex="-1"><a class="header-anchor" href="#root-登入" aria-hidden="true">#</a> root 登入</h1><h2 id="建立資料夾與檔案" tabindex="-1"><a class="header-anchor" href="#建立資料夾與檔案" aria-hidden="true">#</a> 建立資料夾與檔案</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /root
<span class="token function">mkdir</span> .ssh
<span class="token builtin class-name">cd</span> .ssh
<span class="token function">nano</span> authorized_keys
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="加入公鑰字串" tabindex="-1"><a class="header-anchor" href="#加入公鑰字串" aria-hidden="true">#</a> 加入公鑰字串</h2><p>[[setting_ssh_key_to_linux#填寫金鑰列表檔案]]</p><h2 id="修改-ssh-的設定" tabindex="-1"><a class="header-anchor" href="#修改-ssh-的設定" aria-hidden="true">#</a> 修改 ssh 的設定</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/ssh/sshd_config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="開放-root-登入" tabindex="-1"><a class="header-anchor" href="#開放-root-登入" aria-hidden="true">#</a> 開放 root 登入</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#PermitRootLogin prohibit-password
PermitRootLogin yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="" tabindex="-1"><a class="header-anchor" href="#" aria-hidden="true">#</a></h3><h2 id="更改完存檔後記得重啟服務" tabindex="-1"><a class="header-anchor" href="#更改完存檔後記得重啟服務" aria-hidden="true">#</a> 更改完存檔後記得重啟服務</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart sshd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,39),r=[d];function t(l,c){return e(),s("div",null,r)}const u=a(i,[["render",t],["__file","index.html.vue"]]);export{u as default};
