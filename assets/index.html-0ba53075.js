import{_ as a}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as l,c as d,a as n,b as e,e as t,f as c}from"./app-1a68934e.js";const o={},r=n("h1",{id:"設定-nginx",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#設定-nginx","aria-hidden":"true"},"#"),e(" 設定 Nginx")],-1),p=n("h2",{id:"設定檔產生網站",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#設定檔產生網站","aria-hidden":"true"},"#"),e(" 設定檔產生網站")],-1),u={href:"https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhTW",target:"_blank",rel:"noopener noreferrer"},v=c(`<h2 id="常用設定" tabindex="-1"><a class="header-anchor" href="#常用設定" aria-hidden="true">#</a> 常用設定</h2><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code>    <span class="token comment"># 設定監聽的 port</span>
    <span class="token directive"><span class="token keyword">listen</span>          <span class="token number">80</span></span><span class="token punctuation">;</span>
    <span class="token comment"># 定義伺服器名稱</span>
    <span class="token directive"><span class="token keyword">server_name</span>     localhost</span><span class="token punctuation">;</span>
    <span class="token comment"># 設定專案資料夾</span>
    <span class="token directive"><span class="token keyword">root</span>            /home/tca/vue-project/dist</span><span class="token punctuation">;</span>
    <span class="token comment"># 指定初始頁面</span>
    <span class="token directive"><span class="token keyword">index</span>           index.html</span><span class="token punctuation">;</span>
    <span class="token comment"># 宣告編碼</span>
    <span class="token directive"><span class="token keyword">charset</span> utf-8</span><span class="token punctuation">;</span>
    <span class="token comment"># 隱藏伺服器版本資訊</span>
    <span class="token directive"><span class="token keyword">server_tokens</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
    <span class="token comment"># 加入資安標頭</span>
    <span class="token directive"><span class="token keyword">add_header</span> Content-Security-Policy <span class="token string">&quot;
    default-src &#39;self&#39;;
    font-src &#39;self&#39;;
    img-src &#39;self&#39;;
    style-src &#39;self&#39;;
    script-src &#39;self&#39;;
    form-action &#39;self&#39;;
    frame-src &#39;none&#39;;
    frame-ancestors &#39;none&#39;;
    &quot;</span> always</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">add_header</span> X-Content-Security-Policy <span class="token string">&quot;
    default-src &#39;self&#39;;
    font-src &#39;self&#39;;
    img-src &#39;self&#39;;
    style-src &#39;self&#39;;
    script-src &#39;self&#39;;
    form-action &#39;self&#39;;
    frame-src &#39;none&#39;;
    frame-ancestors &#39;none&#39;;
    &quot;</span> always</span><span class="token punctuation">;</span>

    <span class="token directive"><span class="token keyword">add_header</span> Strict-Transport-Security <span class="token string">&quot;max-age=63072000&quot;</span> always</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> X-Content-Type-Options <span class="token string">&quot;nosniff&quot;</span> always</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> X-Frame-Options <span class="token string">&quot;SAMEORIGIN&quot;</span> always</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> X-XSS-Protection  <span class="token string">&quot;1; mode=block&quot;</span> always</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="上傳檔案參考設定" tabindex="-1"><a class="header-anchor" href="#上傳檔案參考設定" aria-hidden="true">#</a> 上傳檔案參考設定</h2><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token comment"># 檔案大小限制，預設1m</span>
<span class="token directive"><span class="token keyword">client_max_body_size</span>     <span class="token number">1m</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">client_header_timeout</span>    <span class="token number">60s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">client_body_timeout</span>      <span class="token number">60s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">proxy_connect_timeout</span>    <span class="token number">60s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">proxy_read_timeout</span>       <span class="token number">60s</span></span><span class="token punctuation">;</span>
<span class="token directive"><span class="token keyword">proxy_send_timeout</span>       <span class="token number">60s</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="設定參考文件" tabindex="-1"><a class="header-anchor" href="#設定參考文件" aria-hidden="true">#</a> 設定參考文件</h1><p>將一些有用到的設定與功能說明紀錄於此</p><h2 id="client-body-buffer-size" tabindex="-1"><a class="header-anchor" href="#client-body-buffer-size" aria-hidden="true">#</a> client_body_buffer_size</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_buffer_size</span> size</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_buffer_size</span> 8k|16k</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：設置請求的緩衝區大小。 如果請求主體大於緩衝區，則將整個主體或僅將其部分寫入臨時文件。臨時文件的設定可參考 <code>client_body_temp_path</code>。預設情況下，緩衝區大小等於兩個內存頁。 這是 x86、其他 32 位平台和 x86-64 上的 8K。 在其他 64 位平台上通常為 16K。</li></ul><h2 id="client-body-temp-path" tabindex="-1"><a class="header-anchor" href="#client-body-temp-path" aria-hidden="true">#</a> client_body_temp_path</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_temp_path</span> path [level1 [level2 [level3]]]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_temp_path</span> client_body_temp</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義用於存儲持有客戶端請求主體的臨時文件的目錄。 指定目錄下最多可以使用三級子目錄層次結構。需要注意存取權限設定。</li></ul><h2 id="client-body-timeout" tabindex="-1"><a class="header-anchor" href="#client-body-timeout" aria-hidden="true">#</a> client_body_timeout</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_timeout</span> time</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_body_timeout</span> <span class="token number">60s</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義請求主體的逾時時間。超時僅針對兩次連續讀取操作之間的一段時間設置，而非針對整個請求主體的傳輸。 如果客戶端在此時間內未傳輸任何內容，則請求將終止並出現 408（Request Timeout）錯誤。</li></ul><h2 id="client-header-buffer-size" tabindex="-1"><a class="header-anchor" href="#client-header-buffer-size" aria-hidden="true">#</a> client_header_buffer_size</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_header_buffer_size</span> size</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_header_buffer_size</span> <span class="token number">1k</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code></li><li>功能說明：設置讀取客戶端請求標頭的緩衝區大小。對於大多數請求，1K 的緩衝區就足夠了。但是，如果請求包含長 cookie，或者來自 WAP 客戶端，則它可能不適合 1K。 如果請求行或請求頭字段不適合此緩衝區，則分配由 <code>large_client_header_buffers</code> 指令配置的更大緩衝區。</li></ul><h2 id="client-header-timeout" tabindex="-1"><a class="header-anchor" href="#client-header-timeout" aria-hidden="true">#</a> client_header_timeout</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_header_timeout</span> time</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_header_timeout</span> <span class="token number">60s</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code></li><li>功能說明：定義請求標頭的逾時時間。如果客戶端沒有在這段時間內傳輸整個標頭，請求將終止並出現 408（Request Timeout）錯誤。</li></ul><h2 id="client-max-body-size" tabindex="-1"><a class="header-anchor" href="#client-max-body-size" aria-hidden="true">#</a> client_max_body_size</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_max_body_size</span> size</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">1m</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：設定最大可允許的請求大小，請求超過大小會返回 413 (Request Entity Too Large)，設定 0 可禁止檢查。</li></ul><h2 id="large-client-header-buffers" tabindex="-1"><a class="header-anchor" href="#large-client-header-buffers" aria-hidden="true">#</a> large_client_header_buffers</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">large_client_header_buffers</span> number size</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">large_client_header_buffers</span> <span class="token number">4</span> <span class="token number">8k</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code></li><li>功能說明：設置用於讀取大型請求標頭的緩衝區的最大數量和大小。 一個請求行不能超過一個緩衝區的大小，否則會向客戶端返回 414（Request-URI Too Large）錯誤。請求頭字段也不能超過一個緩衝區的大小，否則返回 400（Bad Request）錯誤給客戶端。 緩衝區僅按需分配。 默認情況下，緩衝區大小等於 8K 字節。 如果在請求處理結束後連接轉換為保持活動狀態，則釋放這些緩衝區。</li></ul><h2 id="proxy-connect-timeout" tabindex="-1"><a class="header-anchor" href="#proxy-connect-timeout" aria-hidden="true">#</a> proxy_connect_timeout</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_connect_timeout</span> time</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_connect_timeout</span> <span class="token number">60s</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義與代理服務器建立連接的超時時間。 需要注意的是這個超時時間通常不能超過 75 秒。</li></ul><h2 id="proxy-read-timeout" tabindex="-1"><a class="header-anchor" href="#proxy-read-timeout" aria-hidden="true">#</a> proxy_read_timeout</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_read_timeout</span> time</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_read_timeout</span> <span class="token number">60s</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：定義從代理服務器讀取響應的超時時間。 超時僅設置在兩個連續的讀取操作之間，而不是針對整個響應的傳輸。 如果代理服務器在這段時間內沒有傳輸任何東西，連接就會關閉。</li><li></li></ul><h2 id="proxy-send-timeout" tabindex="-1"><a class="header-anchor" href="#proxy-send-timeout" aria-hidden="true">#</a> proxy_send_timeout</h2><ul><li>語法：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_send_timeout</span> time</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>預設：</li></ul><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">proxy_send_timeout</span> <span class="token number">60s</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>作用範圍：<code>http</code>, <code>server</code>, <code>location</code></li><li>功能說明：設置將請求傳輸到代理服務器的超時時間。 超時僅設置在兩個連續的寫操作之間，而不是針對整個請求的傳輸。 如果代理服務器在這段時間內沒有收到任何東西，連接將關閉。</li></ul>`,66);function m(k,b){const s=i("ExternalLinkIcon");return l(),d("div",null,[r,p,n("p",null,[n("a",u,[e("https://www.digitalocean.com/community/tools/nginx?global.app.lang=zhTW"),t(s)])]),v])}const x=a(o,[["render",m],["__file","index.html.vue"]]);export{x as default};
