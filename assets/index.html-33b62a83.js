import{_ as p}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as l,c as r,a as n,b as a,e as s,d as c,w as d,f as i}from"./app-6bf82179.js";const u={},h=n("h1",{id:"在-ubuntu-安裝-php-7",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#在-ubuntu-安裝-php-7","aria-hidden":"true"},"#"),a(" 在 Ubuntu 安裝 PHP 7")],-1),v=n("h2",{id:"前言",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),a(" 前言")],-1),b=n("p",null,[a("由於 Ubuntu 每個版本的作業系統對應的套件版本都不一樣，"),n("br"),a(" 可以從命令列來查詢，也可以官網查詢。")],-1),m={href:"https://packages.ubuntu.com/focal/php",target:"_blank",rel:"noopener noreferrer"},f=n("br",null,null,-1),k={href:"https://packages.ubuntu.com/jammy/php",target:"_blank",rel:"noopener noreferrer"},g=n("p",null,[a("但如果為了要安裝 PHP 7.4，"),n("br"),a(" 而選擇使用舊版的作業系統，"),n("br"),a(" 那麼代價也太大了。")],-1),_=n("p",null,"本文會記錄在 Ubuntu 22.04 安裝 PHP 7.4 的過程。",-1),x=n("h2",{id:"下載安裝",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#下載安裝","aria-hidden":"true"},"#"),a(" 下載安裝")],-1),y=n("h3",{id:"使用第三方套件庫",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#使用第三方套件庫","aria-hidden":"true"},"#"),a(" 使用第三方套件庫")],-1),w=n("p",null,[a("這是第三方的軟體存放庫列表，"),n("br"),a(" 如果要安裝官方套件列表以外的套件，"),n("br"),a(" 也不失為是一個解決方案。")],-1),P=n("p",null,"不過第三方套件有風險存在需要謹慎評估。",-1),H={href:"https://launchpad.net/~ondrej/+archive/ubuntu/php",target:"_blank",rel:"noopener noreferrer"},L=i(`<h3 id="下載指令" tabindex="-1"><a class="header-anchor" href="#下載指令" aria-hidden="true">#</a> 下載指令</h3><p>跟著該套件庫的教學將套件庫列表加入系統。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common
<span class="token function">sudo</span> add-apt-repository ppa:ondrej/php
<span class="token function">sudo</span> <span class="token function">apt</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安裝-php-7-4-fpm-for-nginx" tabindex="-1"><a class="header-anchor" href="#安裝-php-7-4-fpm-for-nginx" aria-hidden="true">#</a> 安裝 PHP 7.4 FPM for Nginx</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-fpm
php-fpm7.4 <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安裝-php-7-4-擴充模組" tabindex="-1"><a class="header-anchor" href="#安裝-php-7-4-擴充模組" aria-hidden="true">#</a> 安裝 PHP 7.4 擴充模組</h3><p>指令參考如下，<code>extension_name</code> 要替換成擴充的名字。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-extension_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="常用的擴充" tabindex="-1"><a class="header-anchor" href="#常用的擴充" aria-hidden="true">#</a> 常用的擴充</h3>`,9),N={href:"https://laravel.com/docs/8.x/deployment",target:"_blank",rel:"noopener noreferrer"},U=n("br",null,null,-1),V=i(`<p>懶得打就整串丟進去跑吧。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-bcmath <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-curl <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-dev <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-gd <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-imagick <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-imap <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-intl <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-mbstring <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-mysql <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-redis <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-soap <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-xmlrpc <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php7.4-zip <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改設定" tabindex="-1"><a class="header-anchor" href="#修改設定" aria-hidden="true">#</a> 修改設定</h2><h3 id="檔案路徑" tabindex="-1"><a class="header-anchor" href="#檔案路徑" aria-hidden="true">#</a> 檔案路徑</h3><p>預設安裝的設定檔路徑就是這個。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/php/7.4/fpm/php.ini
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="常用設定" tabindex="-1"><a class="header-anchor" href="#常用設定" aria-hidden="true">#</a> 常用設定</h3>`,7),I=i(`<h3 id="執行測試" tabindex="-1"><a class="header-anchor" href="#執行測試" aria-hidden="true">#</a> 執行測試</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> php7.4-fpm <span class="token parameter variable">-t</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="重新啟動" tabindex="-1"><a class="header-anchor" href="#重新啟動" aria-hidden="true">#</a> 重新啟動</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> php7.4-fpm restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="權限設定" tabindex="-1"><a class="header-anchor" href="#權限設定" aria-hidden="true">#</a> 權限設定</h2><p>如果 <code>/var/log/nginx/error.log</code><br> 出現  <code>connect() to unix:/var/run/php/php8.1-fpm.sock failed (13: Permission denied)</code><br> 代表 php-fpm 的權限設定有問題<br> 由於預設用戶名稱為  <code>www-data</code><br> 但因為新版本的 nginx 的使用者名稱從  <code>www-data</code>  改成  <code>nginx</code><br> 所以  <code>/etc/php/8.1/fpm/pool.d/www.conf</code>  內要修改預設值</p><div class="language-conf line-numbers-mode" data-ext="conf"><pre class="language-conf"><code>; Unix user/group of processes
; Note: The user is mandatory. If the group is not set, the default user&#39;s group
;       will be used.
user = nginx
group = nginx

; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions. The owner
; and group can be specified either by name or by their numeric IDs.
; Default Values: user and group are set as the running user
;                 mode is set to 0660
listen.owner = nginx
listen.group = nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7);function j(B,C){const e=t("ExternalLinkIcon"),o=t("RouterLink");return l(),r("div",null,[h,v,b,n("p",null,[a("Ubuntu 20.04 對應的版本是 "),n("a",m,[a("PHP 7.4"),s(e)]),a("，"),f,a(" Ubuntu 22.04 對應的版本是 "),n("a",k,[a("PHP 8.1"),s(e)]),a("，")]),g,_,c(" more "),x,y,w,P,n("p",null,[n("a",H,[a("https://launchpad.net/~ondrej/+archive/ubuntu/php"),s(e)])]),L,n("p",null,[a("根據 "),n("a",N,[a("Laravel 8 系統要求"),s(e)]),U,a(" 開發會用到，如果是使用 Laravel 就會要求要安裝。")]),V,n("p",null,[a("常用設定可參照這篇文章 "),s(o,{to:"/posts/2022-08-28-config-php/"},{default:d(()=>[a("PHP 常用設定")]),_:1})]),I])}const S=p(u,[["render",j],["__file","index.html.vue"]]);export{S as default};
