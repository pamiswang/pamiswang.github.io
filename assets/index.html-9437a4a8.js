import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{o as a,c as s,f as e}from"./app-b9a83407.js";const i={},p=e(`<h1 id="安裝-php-8-1" tabindex="-1"><a class="header-anchor" href="#安裝-php-8-1" aria-hidden="true">#</a> 安裝 PHP 8.1</h1><h3 id="ubuntu-22-04-官方儲存庫已經有-8-1-了" tabindex="-1"><a class="header-anchor" href="#ubuntu-22-04-官方儲存庫已經有-8-1-了" aria-hidden="true">#</a> Ubuntu 22.04 官方儲存庫已經有 8.1 了</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1      <span class="token comment"># 要用 apache 裝這個</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-fpm  <span class="token comment"># 要用 nginx  裝這個</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="可參考該-ppa" tabindex="-1"><a class="header-anchor" href="#可參考該-ppa" aria-hidden="true">#</a> 可參考該 PPA</h3><pre><code>https://launchpad.net/~ondrej/+archive/ubuntu/php
</code></pre><h3 id="下載指令" tabindex="-1"><a class="header-anchor" href="#下載指令" aria-hidden="true">#</a> 下載指令</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common
<span class="token function">sudo</span> add-apt-repository ppa:ondrej/php
<span class="token function">sudo</span> <span class="token function">apt</span> update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安裝-php-8-1-fpm-for-nginx" tabindex="-1"><a class="header-anchor" href="#安裝-php-8-1-fpm-for-nginx" aria-hidden="true">#</a> 安裝 PHP 8.1 FPM for Nginx</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-fpm
php-fpm8.1 <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="安裝-php-8-1-擴充模組" tabindex="-1"><a class="header-anchor" href="#安裝-php-8-1-擴充模組" aria-hidden="true">#</a> 安裝 PHP 8.1 擴充模組</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-extension_name
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="查詢可安裝的擴充列表" tabindex="-1"><a class="header-anchor" href="#查詢可安裝的擴充列表" aria-hidden="true">#</a> 查詢可安裝的擴充列表</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-cache</span> pkgnames php8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="常用的擴充" tabindex="-1"><a class="header-anchor" href="#常用的擴充" aria-hidden="true">#</a> 常用的擴充</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-bcmath <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-bz2 <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-curl <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-dev <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-gd <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-imagick <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-imap <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-intl <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-mbstring <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-mysql <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-pgsql <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-redis <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-soap <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-xmlrpc <span class="token parameter variable">-y</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> php8.1-zip <span class="token parameter variable">-y</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改設定檔" tabindex="-1"><a class="header-anchor" href="#修改設定檔" aria-hidden="true">#</a> 修改設定檔</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">nano</span> /etc/php/8.1/fpm/php.ini
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="常用設定" tabindex="-1"><a class="header-anchor" href="#常用設定" aria-hidden="true">#</a> 常用設定</h4><p>[[config_php_8.1]]</p><h3 id="執行測試" tabindex="-1"><a class="header-anchor" href="#執行測試" aria-hidden="true">#</a> 執行測試</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> php-fpm8.1 <span class="token parameter variable">-t</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="重新啟動" tabindex="-1"><a class="header-anchor" href="#重新啟動" aria-hidden="true">#</a> 重新啟動</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">service</span> php8.1-fpm restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="權限設定" tabindex="-1"><a class="header-anchor" href="#權限設定" aria-hidden="true">#</a> 權限設定</h2><p>如果 <code>/var/log/nginx/error.log</code><br> 出現  <code>connect() to unix:/var/run/php/php8.1-fpm.sock failed (13: Permission denied)</code><br> 代表 php-fpm 的權限設定有問題<br> 由於預設用戶名稱為  <code>www-data</code><br> 但因為新版本的 nginx 的使用者名稱從  <code>www-data</code>  改成  <code>nginx</code><br> 所以  <code>/etc/php/8.1/fpm/pool.d/www.conf</code>  內要修改預設值</p><div class="language-conf line-numbers-mode" data-ext="conf"><pre class="language-conf"><code>; Unix user/group of processes
; Note: The user is mandatory. If the group is not set, the default user&#39;s group
;       will be used.
user = nginx
group = nginx

; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions. The owner
; and group can be specified either by name or by their numeric IDs.
; Default Values: user and group are set as the running user
;                 mode is set to 0660
listen.owner = nginx
listen.group = nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,26),t=[p];function l(c,d){return a(),s("div",null,t)}const u=n(i,[["render",l],["__file","index.html.vue"]]);export{u as default};
