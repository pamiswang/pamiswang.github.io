import{_ as n}from"./plugin-vue_export-helper-c27b6911.js";import{r as i,o as d,c as r,a,b as e,e as l,d as c,f as t}from"./app-883707d4.js";const o={},h=a("h1",{id:"ssh-金鑰設定",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#ssh-金鑰設定","aria-hidden":"true"},"#"),e(" SSH 金鑰設定")],-1),u=a("h2",{id:"前言",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),e(" 前言")],-1),m=a("p",null,"本篇文章適用於 Windows 和 Linux 的金鑰建立設定教學。",-1),p=a("br",null,null,-1),b={href:"https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/",target:"_blank",rel:"noopener noreferrer"},v=a("br",null,null,-1),g=t(`<h2 id="確認目前的電腦裡是否有金鑰檔案" tabindex="-1"><a class="header-anchor" href="#確認目前的電腦裡是否有金鑰檔案" aria-hidden="true">#</a> 確認目前的電腦裡是否有金鑰檔案</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Linux：通常放在 /home/username/.ssh<br> Windows：通常放在 C:\\Users\\username.ssh</p><h2 id="基本-ssh-金鑰設定" tabindex="-1"><a class="header-anchor" href="#基本-ssh-金鑰設定" aria-hidden="true">#</a> 基本 SSH 金鑰設定</h2><h3 id="建立指令" tabindex="-1"><a class="header-anchor" href="#建立指令" aria-hidden="true">#</a> 建立指令</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> yourEmail@example.com <span class="token parameter variable">-f</span> id_rsa
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="可選參數" tabindex="-1"><a class="header-anchor" href="#可選參數" aria-hidden="true">#</a> 可選參數：</h3><ul><li>–t 指定金鑰型別，預設是 RSA ，可以省略。</li><li>-b：指定金鑰長度（bits），RSA 最小要求 768 位，預設是 2048 位；DSA 密鑰必須是 1024（FIPS 1862 標準規定）</li><li>-f：指定金鑰檔案儲存檔名，省略會進行提問，預設檔名通常為 id_rsa。</li><li>-P：提供舊密碼，省略會進行提問， <code>-P &#39;&#39;</code> 表示不需要密碼</li><li>-N：提供新密碼，省略會進行提問， <code>-N &#39;&#39;</code> 表示不需要密碼</li><li>-C：設定註釋文字，如 mail，這邊的 mail 需要是註冊 GitLab 的那個 mail。</li><li>-R：主機名稱：從 known_hosts 刪除所有屬於 hostname 的密鑰</li></ul><h3 id="取得金鑰內容" tabindex="-1"><a class="header-anchor" href="#取得金鑰內容" aria-hidden="true">#</a> 取得金鑰內容</h3><p>使用 <code>cat</code> 指令，然後複製裡面的 SSH key</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> ~/.ssh/id_rsa.pub
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="測試金鑰連線" tabindex="-1"><a class="header-anchor" href="#測試金鑰連線" aria-hidden="true">#</a> 測試金鑰連線</h3><p>測試是否設定成功 &amp; 設定 SSH agent</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="多組-ssh-金鑰設定" tabindex="-1"><a class="header-anchor" href="#多組-ssh-金鑰設定" aria-hidden="true">#</a> 多組 SSH 金鑰設定</h2><h3 id="金鑰觀念" tabindex="-1"><a class="header-anchor" href="#金鑰觀念" aria-hidden="true">#</a> 金鑰觀念</h3><p>每一組金鑰可以給多台客戶端電腦使用<br> 但由於每一組金鑰只能對應一台伺服器主機<br> 所以如果要連線多個 git 服務需要設定多組金鑰</p><h3 id="建立多個不同檔名的金鑰" tabindex="-1"><a class="header-anchor" href="#建立多個不同檔名的金鑰" aria-hidden="true">#</a> 建立多個不同檔名的金鑰</h3><p>建立教學可參考上面 <a href="#%E5%9F%BA%E6%9C%AC-ssh-%E9%87%91%E9%91%B0%E8%A8%AD%E5%AE%9A">基本 SSH 金鑰設定</a></p><p>或可參考下方設定</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> yourEmailA@example.com <span class="token parameter variable">-f</span> id_rsa_gitlab
ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> yourEmailB@example.com <span class="token parameter variable">-f</span> id_rsa_github
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="建立-ssh-config-檔案" tabindex="-1"><a class="header-anchor" href="#建立-ssh-config-檔案" aria-hidden="true">#</a> 建立 SSH config 檔案</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">nano</span> config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以使用 visual studio code 連入做新增</p><h3 id="填寫-ssh-config-檔案" tabindex="-1"><a class="header-anchor" href="#填寫-ssh-config-檔案" aria-hidden="true">#</a> 填寫 SSH config 檔案</h3><p>可參考以下範例格式</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 命名連線名稱</span>
Host gitlab.com <span class="token comment"># 要輸入連結的網站網址或IP位址</span>
	HostName gitlab.com <span class="token comment"># 要輸入連結的網站網址或IP位址</span>
	Port <span class="token number">222</span>  <span class="token comment"># 指定埠口</span>
	User yourEmailA@example.com <span class="token comment"># 使用者名稱 mail 或 登入 ID</span>
	PreferredAuthentications publickey <span class="token comment"># 強制使用公鑰驗證</span>
	IdentityFile ~/.ssh/id_rsa_gitlab <span class="token comment"># SSH key的位置</span>

Host github.com <span class="token comment"># 要輸入連結的網站網址或IP位址</span>
	HostName github.com <span class="token comment"># 要輸入連結的網站網址或IP位址</span>
	User yourEmailB@example.com <span class="token comment"># 使用者名稱 mail 或 登入 ID</span>
	PreferredAuthentications publickey <span class="token comment"># 強制使用公鑰驗證</span>
	IdentityFile ~/.ssh/id_rsa_github <span class="token comment"># SSH key的位置</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="設定-ssh-config-權限" tabindex="-1"><a class="header-anchor" href="#設定-ssh-config-權限" aria-hidden="true">#</a> 設定 SSH config 權限</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">600</span> config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="測試金鑰連線-1" tabindex="-1"><a class="header-anchor" href="#測試金鑰連線-1" aria-hidden="true">#</a> 測試金鑰連線</h3><p>測試教學可參考上面</p><h3 id="讀取-config-權限異常" tabindex="-1"><a class="header-anchor" href="#讀取-config-權限異常" aria-hidden="true">#</a> 讀取 config 權限異常</h3><p>如果測試 ssh 金鑰出現錯誤訊息</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Bad owner or permissions on /home/users/.ssh/config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>執行以下命令行：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> ~/.ssh
<span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">600</span> config
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,36);function f(k,x){const s=i("ExternalLinkIcon");return d(),r("div",null,[h,u,m,a("p",null,[e("每次登入 Linux 主機都要打密碼卻常常忘記，"),p,e(" 或是因為"),a("a",b,[e("GitHub的安全性政策"),l(s)]),e("，"),v,e(" 如果碰上以上的情境，那麼就要來用金鑰。")]),c(" more "),g])}const H=n(o,[["render",f],["__file","index.html.vue"]]);export{H as default};
